{% extends "main.html" %}
{% block title %}Image to text{% endblock %}
{% block extrameta %}
    <meta name="description" content="Copy text from image by selecting on image (Super simple). Extract text from any image/picture uploaded or pasted from clipboard. Mac / Windows / Android"/>
    <meta property="og:title" content="ImageToText"/>
    <meta property="og:description" content="Copy text from image by selecting on image (Super simple). Extract text from any image/picture uploaded or pasted from clipboard. Mac / Windows / Android">
    <meta property="og:url" content="https://imagetotext.app/about/"/>
    <meta property="og:type" content="imagetotext" />
    <meta property="og:image" content="https://s.hinty.io/imgorig/cAPm3HpU5fzZRtkeDxkBhi.jpeg?11"/>
    <link rel="canonical" href="https://imagetotext.app/">
    <style type="text/css">
        .input-upload {
            display: none;
        }
        .message {
            position: absolute;
            max-width: 281px;
            right: -15%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            background: #FFFFFF;
            box-shadow: 1px 1px 10px rgba(0, 0, 0, 0.25);
            border-radius: 20px;
            z-index: 1000;
        }
        .message .message-text {
            width: fit-content;
            white-space: pre-line;
        }
        .message button.btn {
            margin-left: 1rem;
        }
        .container {
            margin-top: 2.313rem;
            color: #444444;
        }
        .duo-button {
            max-width: 126px;
        }
        .dragging {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #828282;
            background: #ebebf3;
            font-size: 2rem;
            z-index: 1000;
        }
        .container-header {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }
        .title {
            display: flex;
            align-items: center;
            font-size: 1.5rem;
            line-height: 1.5rem;
            color: black;
            font-weight: 400;
            text-align: left;
        }
        .img-paste {
            height: 100%;
            object-fit: contain;
            user-select: none;
            width: 100%;
            pointer-events: none;
            opacity: 0.8;
        }
        .text {
            white-space: nowrap;
            font-size: 100%;
        }
        .text:hover .text-btn {
            opacity: 1;
        }
        .text-btn {
            opacity: 0;
            position: absolute;
            right: 0;
            top: 0;
            transition: 0.3s;
        }
        .text-btn[data-google] {
            background: radial-gradient(75% 57.36% at 75% 73.33%, #E2E2E2 0%, #FFFFFF 100%);
        }
        .subtitle {
            margin-top: 1.5rem;
            font-size: 1.2rem;
            line-height: 1.2rem;
            font-weight: 400;
            text-align: left;
        }
        .content {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
        }
        .upload-description {
            display: flex;
            flex-direction: column;
            align-items: center;
            font-size: 1.5rem;
            font-weight: 400;
        }
        .upload-title {
            text-align: center;
        }
        .upload-subtitle {
            margin-top: 0.875rem;
        }
        .bold-underline[class] {
            font-weight: 400;
            margin-top: 2.313rem;
            text-decoration: underline;
            cursor: pointer;
        }
        .img-with-texts {
            position: absolute;
            top: 0;
            left: 0;
        }
        .footer-social-wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-top: 5.563rem;
        }
        .footer-social-share {
            display: flex;
            margin-top: 1rem;
        }
        .upload-wrapper {
            margin-top: 5.87rem;
            display: flex;
            align-items: center;
            justify-content: flex-start;
            padding: 0 2.75rem;
            max-width: 428px;
            width: 100%;
            height: 203px;
            background: #EFEFEF;
            border-radius: 0.625rem;
        }
        .status-message {
            margin: 0 auto;
            margin-top: 2rem;
            font-size: 1.5rem;
            color: green;
            font-weight: 400;
        }
        .upload-img {
            margin-right: 2.25rem;
        }
        .img-with-text-footer {
            display: flex;
            align-items: flex-end;
            justify-content: space-between;
            margin-bottom: 2rem;
            width: 100%;
        }
        .footer-social-share .btn.btn-round {
            margin-right: 0.438rem;
        }
        .footer-social-share .btn.btn-round:last-child {
            margin-right: 0px;
        } 
        .img-with-text-footer .footer-social-wrapper {
            margin-top: 0;
        }
        .img-with-text-footer .footer-item.footer-social-share {
            opacity: 1;
        }
        .img-with-text-footer .footer-item {
            margin-right: 2rem;
            display: flex;
            justify-content: flex-start;
            align-items: center;
            cursor: pointer;
        }
        .img-with-text-footer .footer-item:last-child {
            margin-right: 0px;
        }
        .hide {
            display: none !important;
        }
        .loader-texts[class] {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
        .lds-ring {
            display: inline-block;
            position: relative;
            width: 80px;
            height: 80px;
            z-index: 1000;
        }
        .lds-ring div {
            box-sizing: border-box;
            display: block;
            position: absolute;
            width: 64px;
            height: 64px;
            margin: 8px;
            border: 8px solid black;
            border-radius: 50%;
            animation: lds-ring 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;
            border-color: black transparent transparent transparent;
        }
        .lds-ring div:nth-child(1) {
            animation-delay: -0.45s;
        }
        .lds-ring div:nth-child(2) {
            animation-delay: -0.3s;
        }
        .lds-ring div:nth-child(3) {
            animation-delay: -0.15s;
        }
        @keyframes lds-ring {
            0% {
                transform: rotate(0deg);
            }
            100% {
                transform: rotate(360deg);
            }
        }
    </style>
{% endblock %}
{% block body %}
    <main id="app">
        <div class="container">
            <div class="dragging hide">Drop files here"</div>
            <div class="img-with-text-footer hide">
                <div class="btn" onclick="onResetClick()">NEW IMAGE</div>
                <div class="footer-social-wrapper">
                    <span>SHARE</span>
                    <div class="footer-item footer-social-share">
                        <div class="btn btn-round" onclick="window.open('https:\/\/www.facebook.com/sharer/sharer.php?u=' + encodeURIComponent('https://imagetotext.app/') + '&t=' + encodeURIComponent(`Image To Text Simple Copy`));">
                            <svg width="12" height="20" viewBox="0 0 12 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <g filter="url(#filter0_d5)">
                                    <path d="M6.84172 17.9999V10.2454H9.4952L9.89246 7.22333H6.84172V5.29384C6.84172 4.4189 7.08944 3.82258 8.3686 3.82258L10 3.82184V1.11895C9.71772 1.08226 8.74938 1 7.62278 1C5.27066 1 3.66034 2.40829 3.66034 4.99469V7.22342H1V10.2455H3.66026V18L6.84172 17.9999Z" fill="white"/>
                                </g>
                                <defs>
                                    <filter id="filter0_d5" x="0.5" y="0.5" width="11" height="19" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
                                        <feFlood flood-opacity="0" result="BackgroundImageFix"/>
                                        <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"/>
                                        <feOffset dx="0.5" dy="0.5"/>
                                        <feGaussianBlur stdDeviation="0.5"/>
                                        <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.4 0"/>
                                        <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow"/>
                                        <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow" result="shape"/>
                                    </filter>
                                </defs>
                            </svg>
                        </div>
                        <div class="btn btn-round" onclick="window.open('https://wa.me/?text=' + ' %20 ' + encodeURIComponent('https://imagetotext.app/')); return false;">
                           <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M11.9609 2.03556C11.3154 1.38801 10.5471 0.874614 9.70063 0.525178C8.85414 0.175742 7.94635 -0.00276299 7.02999 3.23287e-05C3.18631 3.23287e-05 0.059316 3.11237 0.059316 6.9361C0.0555898 8.15383 0.376331 9.35076 0.988832 10.4048L0 14L3.69573 13.0343C4.71799 13.5885 5.86321 13.8794 7.0272 13.8805H7.02999C10.8709 13.8805 13.9972 10.7682 14 6.94166C14.0029 6.03028 13.8242 5.12737 13.4742 4.28523C13.1242 3.44308 12.6098 2.67843 11.9609 2.03556ZM10.4396 9.41694C10.2952 9.82127 9.58406 10.2117 9.26515 10.2388C8.94345 10.2687 8.64408 10.3826 7.17444 9.80807C5.40194 9.11335 4.2854 7.30569 4.19748 7.18898C4.11025 7.07505 3.48848 6.24972 3.48848 5.398C3.48848 4.54349 3.93858 4.12527 4.09699 3.95159C4.25749 3.77791 4.44591 3.73414 4.56314 3.73414C4.67759 3.73414 4.79482 3.73414 4.89531 3.7397C5.02092 3.74248 5.157 3.75012 5.28819 4.03843C5.44311 4.38023 5.78156 5.23752 5.82553 5.32436C5.86879 5.41119 5.8988 5.51471 5.83879 5.62864C5.78156 5.74536 5.75156 5.81622 5.66712 5.91903C5.57989 6.01907 5.48428 6.14412 5.40543 6.21985C5.3182 6.30669 5.22818 6.40186 5.32867 6.57554C5.42985 6.74922 5.77877 7.31611 6.29657 7.77463C6.9616 8.36653 7.52336 8.54854 7.69782 8.63538C7.87228 8.72222 7.97276 8.70833 8.07395 8.59162C8.17723 8.47768 8.5101 8.08725 8.62733 7.91357C8.74178 7.73989 8.85901 7.76976 9.01673 7.82673C9.17723 7.8837 10.0335 8.304 10.2079 8.39084C10.3824 8.47768 10.4968 8.52145 10.5408 8.59231C10.5841 8.66526 10.5841 9.01262 10.4396 9.41694Z" fill="white"/>
                            </svg>
                        </div>
                        <div class="btn btn-round" onclick="window.open('https:\/\/twitter.com/intent/tweet?text=' + ' %20 ' + encodeURIComponent('https://imagetotext.app/')); return false;">
                            <svg width="23" height="21" viewBox="0 0 23 21" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <g filter="url(#filter0_d6)">
                                    <path d="M19 4.28697C18.3854 4.55951 17.725 4.7437 17.0319 4.82654C17.7394 4.40244 18.2827 3.73091 18.5385 2.93078C17.8765 3.32342 17.1431 3.6086 16.3626 3.76231C15.7375 3.09634 14.847 2.68018 13.8614 2.68018C11.9689 2.68018 10.4347 4.2144 10.4347 6.10674C10.4347 6.3753 10.465 6.63684 10.5234 6.88763C7.67553 6.74473 5.15064 5.38053 3.46057 3.30741C3.16561 3.81351 2.99663 4.40213 2.99663 5.03011C2.99663 6.21891 3.60163 7.26775 4.52108 7.88222C3.95933 7.86444 3.431 7.7103 2.96895 7.45365C2.96871 7.46795 2.96871 7.4823 2.96871 7.49672C2.96871 9.15698 4.14988 10.5419 5.71745 10.8567C5.42989 10.935 5.12718 10.9769 4.81463 10.9769C4.59384 10.9769 4.37916 10.9554 4.16998 10.9154C4.60599 12.2768 5.87147 13.2675 7.37093 13.2951C6.19819 14.2142 4.72066 14.762 3.11527 14.762C2.83871 14.762 2.56593 14.7458 2.29785 14.7141C3.81429 15.6864 5.61549 16.2536 7.5506 16.2536C13.8534 16.2536 17.3 11.0322 17.3 6.50409C17.3 6.35551 17.2967 6.20773 17.2901 6.0608C17.9596 5.57768 18.5406 4.97414 19 4.28697Z" fill="white"/>
                                </g>
                                <defs>
                                    <filter id="filter0_d6" x="0.297852" y="0.680176" width="22.7021" height="19.5734" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
                                        <feFlood flood-opacity="0" result="BackgroundImageFix"/>
                                        <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"/>
                                        <feOffset dx="1" dy="1"/>
                                        <feGaussianBlur stdDeviation="1.5"/>
                                        <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"/>
                                        <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow"/>
                                        <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow" result="shape"/>
                                    </filter>
                                </defs>
                            </svg>
                        </div>
                        <div class="btn btn-round" onclick="window.open('https:\/\/reddit.com/submit/?url=' + encodeURIComponent('https://imagetotext.app/')); + '&amp'; return false;">
                           <svg width="20" height="18" viewBox="0 0 20 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <g filter="url(#filter0_d7)">
                                    <path d="M18 8.11843C18 7.02465 17.0459 6.13479 15.8731 6.13479C15.2187 6.13479 14.6167 6.40752 14.2154 6.8752C13.0892 6.39737 11.8051 6.10294 10.4468 6.00971L11.6139 2.56997L14.2206 3.09671C14.4202 3.82113 15.1261 4.35819 15.9642 4.35819C16.957 4.35819 17.7646 3.60497 17.7646 2.67912C17.7646 1.75327 16.957 1 15.9642 1C15.2471 1 14.6274 1.39338 14.3381 1.96065L11.3302 1.3528C11.0239 1.29091 10.7168 1.45669 10.6222 1.7357L9.18169 5.98109C7.59173 6.01725 6.0832 6.32415 4.78469 6.87514C4.38325 6.40752 3.78127 6.13479 3.12691 6.13479C1.95413 6.13479 1 7.02465 1 8.11843C1 8.64965 1.22381 9.14839 1.62118 9.51882C1.38418 9.9932 1.26416 10.4866 1.26416 10.9888C1.26416 12.3517 2.13899 13.6237 3.72762 14.5706C5.274 15.4924 7.32411 16 9.5 16C11.676 16 13.726 15.4924 15.2724 14.5706C16.861 13.6237 17.7358 12.3517 17.7358 10.9888C17.7358 10.4867 17.6158 9.99325 17.3788 9.51882C17.7762 9.14834 18 8.64965 18 8.11843ZM1.93396 8.79837C1.79954 8.5949 1.72923 8.36265 1.72923 8.11843C1.72923 7.39967 2.35618 6.8149 3.12691 6.8149C3.45774 6.8149 3.76851 6.9198 4.01712 7.1129C3.12856 7.58342 2.4291 8.14944 1.93396 8.79837ZM5.13472 9.94695C5.13472 9.16568 5.81625 8.53007 6.65395 8.53007C7.49165 8.53007 8.17317 9.16568 8.17317 9.94695C8.17317 10.7282 7.49165 11.3638 6.65395 11.3638C5.81625 11.3638 5.13472 10.7282 5.13472 9.94695ZM12.6165 13.1805C12.0243 13.7834 10.8302 14.1578 9.5 14.1578C8.16989 14.1578 6.97572 13.7834 6.38352 13.1805C6.27384 13.0689 6.21744 12.9241 6.22449 12.7729C6.23154 12.6216 6.30142 12.482 6.42108 12.3797C6.53344 12.2837 6.67916 12.2309 6.83151 12.2309C7.00148 12.2309 7.16477 12.2979 7.27956 12.4147C7.63221 12.7736 8.5452 13.0243 9.5 13.0243C10.4548 13.0243 11.3679 12.7736 11.7204 12.4147C11.8352 12.2978 11.9985 12.2309 12.1685 12.2309C12.321 12.2309 12.4667 12.2837 12.579 12.3797C12.6988 12.482 12.7685 12.6216 12.7756 12.7729C12.7827 12.9241 12.7262 13.0689 12.6165 13.1805ZM12.3461 11.3638C11.5084 11.3638 10.8268 10.7282 10.8268 9.94695C10.8268 9.16568 11.5084 8.53007 12.3461 8.53007C13.1838 8.53007 13.8653 9.16568 13.8653 9.94695C13.8653 10.7282 13.1838 11.3638 12.3461 11.3638ZM17.066 8.79837C16.571 8.14944 15.8715 7.58347 14.9829 7.1129C15.2315 6.91975 15.5423 6.8149 15.8731 6.8149C16.6438 6.8149 17.2708 7.39967 17.2708 8.11843C17.2708 8.36265 17.2005 8.5949 17.066 8.79837Z" fill="white"/>
                                </g>
                                <defs>
                                    <filter id="filter0_d7" x="0.5" y="0.5" width="19" height="17" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
                                        <feFlood flood-opacity="0" result="BackgroundImageFix"/>
                                        <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"/>
                                        <feOffset dx="0.5" dy="0.5"/>
                                        <feGaussianBlur stdDeviation="0.5"/>
                                        <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.4 0"/>
                                        <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow"/>
                                        <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow" result="shape"/>
                                    </filter>
                                </defs>
                            </svg>
                        </div>
                        <div class="btn btn-round" onclick="onCopyLink()">
                            <svg width="17" height="17" viewBox="0 0 17 17" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <g filter="url(#filter0_d8)">
                                    <path d="M12.8462 6.5H7.65385C7.01659 6.5 6.5 7.01659 6.5 7.65385V12.8462C6.5 13.4834 7.01659 14 7.65385 14H12.8462C13.4834 14 14 13.4834 14 12.8462V7.65385C14 7.01659 13.4834 6.5 12.8462 6.5Z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path d="M3.73077 9.5H3.15385C2.84783 9.5 2.55434 9.37843 2.33795 9.16205C2.12157 8.94566 2 8.65217 2 8.34615V3.15385C2 2.84783 2.12157 2.55434 2.33795 2.33795C2.55434 2.12157 2.84783 2 3.15385 2H8.34615C8.65217 2 8.94566 2.12157 9.16205 2.33795C9.37843 2.55434 9.5 2.84783 9.5 3.15385V3.73077" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </g>
                                <defs>
                                    <filter id="filter0_d8" x="0.5" y="0.5" width="16" height="16" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
                                        <feFlood flood-opacity="0" result="BackgroundImageFix"/>
                                        <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"/>
                                        <feOffset dx="0.5" dy="0.5"/>
                                        <feGaussianBlur stdDeviation="0.5"/>
                                        <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.4 0"/>
                                        <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow"/>
                                        <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow" result="shape"/>
                                    </filter>
                                </defs>
                            </svg>
                        </div>
                    </div>
                </div>
                <div class="btn btn-mid duo-button" onclick="onToogleMode(this)"><div class="btn active-duo" data-type="copy">Copy</div>Google</div>
            </div>
            <div class="content">
                <div class="message hide">
                    <div class="message-text"></div>
                    <button class="btn btn-round">&times;</button>
                </div>
                <img src="" class="img img-paste hide" />
                <div class="img-with-texts hide"></div>
                <div class="container-header hide">
                    <a href="https://imagetotext.app/" class="title">
                        <svg width="54" height="54" viewBox="0 0 54 54" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <g filter="url(#filter0_d45)">
                                <rect x="5" y="5" width="40" height="40" rx="2" fill="white"/>
                            <g filter="url(#filter1_d46)">
                                <path d="M12.3666 18.36C12.18 18.0667 12.0066 17.6667 11.8466 17.16C11.6866 16.6533 11.6066 16.12 11.6066 15.56C11.6066 14.52 11.8333 13.7733 12.2866 13.32C12.7666 12.8667 13.38 12.64 14.1266 12.64H31.5666C31.7533 12.9333 31.9266 13.3333 32.0866 13.84C32.2466 14.3467 32.3266 14.88 32.3266 15.44C32.3266 16.48 32.0866 17.2267 31.6066 17.68C31.1533 18.1333 30.5533 18.36 29.8066 18.36H25.3666V36.84C25.0733 36.92 24.6066 37 23.9666 37.08C23.3533 37.16 22.74 37.2 22.1266 37.2C21.5133 37.2 20.9666 37.1467 20.4866 37.04C20.0333 36.96 19.6466 36.8 19.3266 36.56C19.0066 36.32 18.7666 35.9866 18.6066 35.56C18.4466 35.1333 18.3666 34.5733 18.3666 33.88V18.36H12.3666Z" fill="black"/>
                            </g>
                                <path fill-rule="evenodd" clip-rule="evenodd" d="M37 41L37 9.00003L39 9.00003L39 41L37 41Z" fill="black"/>
                            </g>
                            <defs>
                                <filter id="filter0_d45" x="0" y="0" width="54" height="54" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
                                    <feFlood flood-opacity="0" result="BackgroundImageFix"/>
                                    <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"/>
                                    <feOffset dx="2" dy="2"/>
                                    <feGaussianBlur stdDeviation="3.5"/>
                                    <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"/>
                                    <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow"/>
                                    <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow" result="shape"/>
                                </filter>
                                    <filter id="filter1_d46" x="9.60665" y="10.64" width="24.72" height="28.56" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
                                    <feFlood flood-opacity="0" result="BackgroundImageFix"/>
                                    <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"/>
                                    <feOffset/>
                                    <feGaussianBlur stdDeviation="1"/>
                                    <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0"/>
                                    <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow"/>
                                    <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow" result="shape"/>
                                </filter>
                            </defs>
                        </svg>
                        Image to text app 
                    </a>
                    <h2 class="subtitle">Copy text from image</h2>
                    <p class="subtitle">
                        Transform image to text by Ctrl+V and copy text in one click.
                        Simpler then ever. Works on Mac, Androd or PC
                    </p>
                </div>

                <div class="upload-wrapper hide">
                    <div class="upload-img">
                        <svg width="96" height="96" viewBox="0 0 96 96" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <g opacity="0.3">
                            <path d="M12 12V18H18V12H12ZM24 12V18H30V12H24ZM36 12V18H42V12H36ZM48 12V18H54V12H48ZM60 12V18H66V12H60ZM72 12V18H78V12H72ZM12 24V30H18V24H12ZM72 24V30H78V24H72ZM12 36V42H18V36H12ZM72 36V42H78V36H72ZM43.5 39L42.5625 40.2188L39 45H27H24V48V81V84H27H81H84V81V48V45H81H69L65.4375 40.2188L64.5 39H63H45H43.5ZM46.5 45H61.5L65.0625 49.7812L66 51H67.5H78V78H30V51H40.5H42L42.9375 49.7812L46.5 45ZM12 48V54H18V48H12ZM54 51C47.4081 51 42 56.4081 42 63C42 69.5919 47.4081 75 54 75C60.5919 75 66 69.5919 66 63C66 56.4081 60.5919 51 54 51ZM54 57C57.3492 57 60 59.6508 60 63C60 66.3492 57.3492 69 54 69C50.6508 69 48 66.3492 48 63C48 59.6508 50.6508 57 54 57ZM12 60V66H18V60H12Z" fill="black"/>
                            </g>
                        </svg>
                    </div>
                    <div class="upload-description">
                        <div class="upload-title">Ctrl+V screenshot or Drag & Drop<br />or</div>
                        <div class="upload-subtitle"><button class="btn" onclick="onUploadClick()">UPLOAD FILE</button></div>
                    </div>
                </div>
                <div class="footer-social-wrapper upload-social-wrapper hide">
                    <span>SHARE WITH OTHERS OR SAVE BOOKMARK</span>
                    <div class="footer-item footer-social-share">
                        <div class="btn btn-round" onclick="window.open('https:\/\/www.facebook.com/sharer/sharer.php?u=' + encodeURIComponent('https://imagetotext.app/') + '&t=' + encodeURIComponent(`Image To Text Simple Copy`));">
                            <svg width="12" height="20" viewBox="0 0 12 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <g filter="url(#filter0_d1)">
                                    <path d="M6.84172 17.9999V10.2454H9.4952L9.89246 7.22333H6.84172V5.29384C6.84172 4.4189 7.08944 3.82258 8.3686 3.82258L10 3.82184V1.11895C9.71772 1.08226 8.74938 1 7.62278 1C5.27066 1 3.66034 2.40829 3.66034 4.99469V7.22342H1V10.2455H3.66026V18L6.84172 17.9999Z" fill="white"/>
                                </g>
                                <defs>
                                    <filter id="filter0_d1" x="0.5" y="0.5" width="11" height="19" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
                                        <feFlood flood-opacity="0" result="BackgroundImageFix"/>
                                        <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"/>
                                        <feOffset dx="0.5" dy="0.5"/>
                                        <feGaussianBlur stdDeviation="0.5"/>
                                        <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.4 0"/>
                                        <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow"/>
                                        <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow" result="shape"/>
                                    </filter>
                                </defs>
                            </svg>
                        </div>
                        <div class="btn btn-round" onclick="window.open('https://wa.me/?text=' + ' %20 ' + encodeURIComponent('https://imagetotext.app/')); return false;">
                            <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M11.9609 2.03556C11.3154 1.38801 10.5471 0.874614 9.70063 0.525178C8.85414 0.175742 7.94635 -0.00276299 7.02999 3.23287e-05C3.18631 3.23287e-05 0.059316 3.11237 0.059316 6.9361C0.0555898 8.15383 0.376331 9.35076 0.988832 10.4048L0 14L3.69573 13.0343C4.71799 13.5885 5.86321 13.8794 7.0272 13.8805H7.02999C10.8709 13.8805 13.9972 10.7682 14 6.94166C14.0029 6.03028 13.8242 5.12737 13.4742 4.28523C13.1242 3.44308 12.6098 2.67843 11.9609 2.03556ZM10.4396 9.41694C10.2952 9.82127 9.58406 10.2117 9.26515 10.2388C8.94345 10.2687 8.64408 10.3826 7.17444 9.80807C5.40194 9.11335 4.2854 7.30569 4.19748 7.18898C4.11025 7.07505 3.48848 6.24972 3.48848 5.398C3.48848 4.54349 3.93858 4.12527 4.09699 3.95159C4.25749 3.77791 4.44591 3.73414 4.56314 3.73414C4.67759 3.73414 4.79482 3.73414 4.89531 3.7397C5.02092 3.74248 5.157 3.75012 5.28819 4.03843C5.44311 4.38023 5.78156 5.23752 5.82553 5.32436C5.86879 5.41119 5.8988 5.51471 5.83879 5.62864C5.78156 5.74536 5.75156 5.81622 5.66712 5.91903C5.57989 6.01907 5.48428 6.14412 5.40543 6.21985C5.3182 6.30669 5.22818 6.40186 5.32867 6.57554C5.42985 6.74922 5.77877 7.31611 6.29657 7.77463C6.9616 8.36653 7.52336 8.54854 7.69782 8.63538C7.87228 8.72222 7.97276 8.70833 8.07395 8.59162C8.17723 8.47768 8.5101 8.08725 8.62733 7.91357C8.74178 7.73989 8.85901 7.76976 9.01673 7.82673C9.17723 7.8837 10.0335 8.304 10.2079 8.39084C10.3824 8.47768 10.4968 8.52145 10.5408 8.59231C10.5841 8.66526 10.5841 9.01262 10.4396 9.41694Z" fill="white"/>
                            </svg>
                        </div>
                        <div class="btn btn-round" onclick="window.open('https:\/\/twitter.com/intent/tweet?text=' + ' %20 ' + encodeURIComponent('https://imagetotext.app/')); return false;">
                            <svg width="23" height="21" viewBox="0 0 23 21" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <g filter="url(#filter0_d2)">
                                    <path d="M19 4.28697C18.3854 4.55951 17.725 4.7437 17.0319 4.82654C17.7394 4.40244 18.2827 3.73091 18.5385 2.93078C17.8765 3.32342 17.1431 3.6086 16.3626 3.76231C15.7375 3.09634 14.847 2.68018 13.8614 2.68018C11.9689 2.68018 10.4347 4.2144 10.4347 6.10674C10.4347 6.3753 10.465 6.63684 10.5234 6.88763C7.67553 6.74473 5.15064 5.38053 3.46057 3.30741C3.16561 3.81351 2.99663 4.40213 2.99663 5.03011C2.99663 6.21891 3.60163 7.26775 4.52108 7.88222C3.95933 7.86444 3.431 7.7103 2.96895 7.45365C2.96871 7.46795 2.96871 7.4823 2.96871 7.49672C2.96871 9.15698 4.14988 10.5419 5.71745 10.8567C5.42989 10.935 5.12718 10.9769 4.81463 10.9769C4.59384 10.9769 4.37916 10.9554 4.16998 10.9154C4.60599 12.2768 5.87147 13.2675 7.37093 13.2951C6.19819 14.2142 4.72066 14.762 3.11527 14.762C2.83871 14.762 2.56593 14.7458 2.29785 14.7141C3.81429 15.6864 5.61549 16.2536 7.5506 16.2536C13.8534 16.2536 17.3 11.0322 17.3 6.50409C17.3 6.35551 17.2967 6.20773 17.2901 6.0608C17.9596 5.57768 18.5406 4.97414 19 4.28697Z" fill="white"/>
                                </g>
                            <defs>
                                <filter id="filter0_d2" x="0.297852" y="0.680176" width="22.7021" height="19.5734" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
                                    <feFlood flood-opacity="0" result="BackgroundImageFix"/>
                                    <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"/>
                                    <feOffset dx="1" dy="1"/>
                                    <feGaussianBlur stdDeviation="1.5"/>
                                    <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"/>
                                    <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow"/>
                                    <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow" result="shape"/>
                                </filter>
                                </defs>
                            </svg>
                        </div>
                        <div class="btn btn-round" onclick="window.open('https:\/\/reddit.com/submit/?url=' + encodeURIComponent('https://imagetotext.app/')); + '&amp'; return false;">
                            <svg width="20" height="18" viewBox="0 0 20 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <g filter="url(#filter0_d3)">
                                    <path d="M18 8.11843C18 7.02465 17.0459 6.13479 15.8731 6.13479C15.2187 6.13479 14.6167 6.40752 14.2154 6.8752C13.0892 6.39737 11.8051 6.10294 10.4468 6.00971L11.6139 2.56997L14.2206 3.09671C14.4202 3.82113 15.1261 4.35819 15.9642 4.35819C16.957 4.35819 17.7646 3.60497 17.7646 2.67912C17.7646 1.75327 16.957 1 15.9642 1C15.2471 1 14.6274 1.39338 14.3381 1.96065L11.3302 1.3528C11.0239 1.29091 10.7168 1.45669 10.6222 1.7357L9.18169 5.98109C7.59173 6.01725 6.0832 6.32415 4.78469 6.87514C4.38325 6.40752 3.78127 6.13479 3.12691 6.13479C1.95413 6.13479 1 7.02465 1 8.11843C1 8.64965 1.22381 9.14839 1.62118 9.51882C1.38418 9.9932 1.26416 10.4866 1.26416 10.9888C1.26416 12.3517 2.13899 13.6237 3.72762 14.5706C5.274 15.4924 7.32411 16 9.5 16C11.676 16 13.726 15.4924 15.2724 14.5706C16.861 13.6237 17.7358 12.3517 17.7358 10.9888C17.7358 10.4867 17.6158 9.99325 17.3788 9.51882C17.7762 9.14834 18 8.64965 18 8.11843ZM1.93396 8.79837C1.79954 8.5949 1.72923 8.36265 1.72923 8.11843C1.72923 7.39967 2.35618 6.8149 3.12691 6.8149C3.45774 6.8149 3.76851 6.9198 4.01712 7.1129C3.12856 7.58342 2.4291 8.14944 1.93396 8.79837ZM5.13472 9.94695C5.13472 9.16568 5.81625 8.53007 6.65395 8.53007C7.49165 8.53007 8.17317 9.16568 8.17317 9.94695C8.17317 10.7282 7.49165 11.3638 6.65395 11.3638C5.81625 11.3638 5.13472 10.7282 5.13472 9.94695ZM12.6165 13.1805C12.0243 13.7834 10.8302 14.1578 9.5 14.1578C8.16989 14.1578 6.97572 13.7834 6.38352 13.1805C6.27384 13.0689 6.21744 12.9241 6.22449 12.7729C6.23154 12.6216 6.30142 12.482 6.42108 12.3797C6.53344 12.2837 6.67916 12.2309 6.83151 12.2309C7.00148 12.2309 7.16477 12.2979 7.27956 12.4147C7.63221 12.7736 8.5452 13.0243 9.5 13.0243C10.4548 13.0243 11.3679 12.7736 11.7204 12.4147C11.8352 12.2978 11.9985 12.2309 12.1685 12.2309C12.321 12.2309 12.4667 12.2837 12.579 12.3797C12.6988 12.482 12.7685 12.6216 12.7756 12.7729C12.7827 12.9241 12.7262 13.0689 12.6165 13.1805ZM12.3461 11.3638C11.5084 11.3638 10.8268 10.7282 10.8268 9.94695C10.8268 9.16568 11.5084 8.53007 12.3461 8.53007C13.1838 8.53007 13.8653 9.16568 13.8653 9.94695C13.8653 10.7282 13.1838 11.3638 12.3461 11.3638ZM17.066 8.79837C16.571 8.14944 15.8715 7.58347 14.9829 7.1129C15.2315 6.91975 15.5423 6.8149 15.8731 6.8149C16.6438 6.8149 17.2708 7.39967 17.2708 8.11843C17.2708 8.36265 17.2005 8.5949 17.066 8.79837Z" fill="white"/>
                                </g>
                                <defs>
                                    <filter id="filter0_d3" x="0.5" y="0.5" width="19" height="17" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
                                        <feFlood flood-opacity="0" result="BackgroundImageFix"/>
                                        <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"/>
                                        <feOffset dx="0.5" dy="0.5"/>
                                        <feGaussianBlur stdDeviation="0.5"/>
                                        <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.4 0"/>
                                        <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow"/>
                                        <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow" result="shape"/>
                                    </filter>
                                </defs>
                            </svg>
                        </div>
                        <div class="btn btn-round" onclick="onCopyLink()">
                            <svg width="17" height="17" viewBox="0 0 17 17" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <g filter="url(#filter0_d4)">
                                    <path d="M12.8462 6.5H7.65385C7.01659 6.5 6.5 7.01659 6.5 7.65385V12.8462C6.5 13.4834 7.01659 14 7.65385 14H12.8462C13.4834 14 14 13.4834 14 12.8462V7.65385C14 7.01659 13.4834 6.5 12.8462 6.5Z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path d="M3.73077 9.5H3.15385C2.84783 9.5 2.55434 9.37843 2.33795 9.16205C2.12157 8.94566 2 8.65217 2 8.34615V3.15385C2 2.84783 2.12157 2.55434 2.33795 2.33795C2.55434 2.12157 2.84783 2 3.15385 2H8.34615C8.65217 2 8.94566 2.12157 9.16205 2.33795C9.37843 2.55434 9.5 2.84783 9.5 3.15385V3.73077" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </g>
                                <defs>
                                <filter id="filter0_d4" x="0.5" y="0.5" width="16" height="16" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
                                    <feFlood flood-opacity="0" result="BackgroundImageFix"/>
                                    <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"/>
                                    <feOffset dx="0.5" dy="0.5"/>
                                    <feGaussianBlur stdDeviation="0.5"/>
                                    <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.4 0"/>
                                    <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow"/>
                                    <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow" result="shape"/>
                                </filter>
                                </defs>
                            </svg>
                        </div>
                    </div>
                </div>
                <a href="/about/" class="bold-underline about-page hide">More info</a>
            </div>
        </div>
    </main>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            var rootApp = document.querySelector("#app");
            var container = rootApp.querySelector('#app > .container');
            var img = container.querySelector('.img-paste');
            var imgTexts = container.querySelector('.img-with-texts');
            var header = container.querySelector('.container-header');
            var upload = container.querySelector('.upload-wrapper');
            var imgFooter = container.querySelector('.img-with-text-footer');
            var dragging = container.querySelector('.dragging');
            var uploadSocial = container.querySelector('.upload-social-wrapper');
            var aboutLink = container.querySelector('.about-page');
            var duoButton = container.querySelector('.duo-button');
            var message = container.querySelector('.message');

            function callREST(img) {
                return new Promise(function(resolve, reject) {
                    fetch('/upload/', { 
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify(img),
                    }).then(response => {
                        if(!response.ok) {
                            reject('no text');
                            return;
                        }
                        response.json().then(json => {
                            resolve(json)
                        });
                    })
                })
            }

            var hideAndShowElm = {
                showLoader() {
                    this.hideLoader();
                    this.isLoading = true;

                    var imgWrap = container.querySelector('.content');

                    imgWrap.insertAdjacentElement('afterbegin', this.getLoaderElement());
                    
                    return this;
                },
                hideLoader() {
                    this.isLoading = false;
                    var loader = container.querySelector('.loader');

                    if(loader) loader.remove();

                    return this;
                },
                showDragging() {
                    dragging.classList.remove('hide');
                    return this;
                },
                hideDragging() {
                    dragging.classList.add('hide');
                    return this;
                },
                showTextOnImg() {
                    imgTexts.classList.remove('hide');
                    return this;
                },
                hideTextOnImg() {
                    imgTexts.classList.add('hide');
                    return this;
                },
                showMessage(text) {
                    message.classList.remove('hide');
                    message.querySelector('.message-text').innerHTML = text.trim();
                    return this;
                },
                hideMessage(text) {
                    message.classList.add('hide');
                    return this;
                },
            };

            var layouts = {
                showImageLayout() {
                    img.classList.remove('hide');
                    imgTexts.classList.remove('hide');
                    imgFooter.classList.remove('hide');

                    return this;
                },
                hideImageLayout() {
                    img.classList.add('hide');
                    imgTexts.classList.add('hide');
                    imgFooter.classList.add('hide');

                    return this;
                },
                hideInitLayout() {
                    header.classList.add('hide');
                    upload.classList.add('hide');
                    uploadSocial.classList.add('hide');
                    aboutLink.classList.add('hide');

                    return this;
                },
                showInitLayout() {
                    header.classList.remove('hide');
                    upload.classList.remove('hide');
                    uploadSocial.classList.remove('hide');
                    aboutLink.classList.remove('hide');

                    return this;
                },
                startUploadLayout(base64, copyMode) {
                    this.hideInitLayout().toogleCopyMode(copyMode || app.copyMode).setBase64(base64).setImgSrc().setScaleContainer().showLoader();
                    return this;
                },
                endUploadLayout(texts) {
                    this.setTexts(texts).insertText().hideLoader();
                    return this;
                },
                restoreInitLayout() {
                    this.clearState().hideImageLayout().hideLoader().setInfToStorage().showInitLayout();
                    return this;
                },
            };

            var html = {
                getLoaderElement() {
                    var div = document.createElement('div');

                    div.classList.add('lds-ring', 'loader', 'loader-texts');
                    div.innerHTML = '<div></div><div></div><div></div><div></div>';
                    
                    return div;
                },
                createCopyLineButtonHTML(height) {
                    //var id = Date.now() + '-' + height + '-' + Math.random() * 100;
                    return `<button style="height: ${height}px; width: ${height}px;right: ${-height - 2}px" class="btn text-btn" onclick="onCopyLineClick(this);" data-copy="copy">
                            <svg width="${height - 5}" height="${height - 5}" viewBox="0 0 17 17" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <g filter="url(#filter0_d19)">
                                    <path d="M12.8462 6.5H7.65385C7.01659 6.5 6.5 7.01659 6.5 7.65385V12.8462C6.5 13.4834 7.01659 14 7.65385 14H12.8462C13.4834 14 14 13.4834 14 12.8462V7.65385C14 7.01659 13.4834 6.5 12.8462 6.5Z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path d="M3.73077 9.5H3.15385C2.84783 9.5 2.55434 9.37843 2.33795 9.16205C2.12157 8.94566 2 8.65217 2 8.34615V3.15385C2 2.84783 2.12157 2.55434 2.33795 2.33795C2.55434 2.12157 2.84783 2 3.15385 2H8.34615C8.65217 2 8.94566 2.12157 9.16205 2.33795C9.37843 2.55434 9.5 2.84783 9.5 3.15385V3.73077" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </g>
                                <defs>
                                <filter id="filter0_d19" x="0.5" y="0.5" width="16" height="16" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
                                    <feFlood flood-opacity="0" result="BackgroundImageFix"/>
                                    <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"/>
                                    <feOffset dx="0.5" dy="0.5"/>
                                    <feGaussianBlur stdDeviation="0.5"/>
                                    <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.4 0"/>
                                    <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow"/>
                                    <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow" result="shape"/>
                                </filter>
                                </defs>
                            </svg>
                        </button>
                    `;
                },
                createGoogleSearchHTML(height) {
                    return `<button style="height: ${height}px; width: ${height}px;right: ${-height - 2}px" class="btn text-btn" onclick="onGoogleSearch(this);" data-google="google">
                                <svg width="${height - 5}" height="${height - 5}" viewBox="0 0 11 11" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <g filter="url(#filter0_d20)">
                                        <path fill-rule="evenodd" clip-rule="evenodd" d="M5.07996 4.4285V5.8H7.34846C7.25696 6.3885 6.66346 7.525 5.07996 7.525C3.71496 7.525 2.59996 6.395 2.59996 5C2.59996 3.605 3.71496 2.475 5.07996 2.475C5.85696 2.475 6.37696 2.805 6.67496 3.0915L7.75996 2.0455C7.06296 1.395 6.15996 1 5.07996 1C2.86846 1 1.07996 2.7885 1.07996 5C1.07996 7.2115 2.86846 9 5.07996 9C7.38846 9 8.91996 7.377 8.91996 5.0915C8.91996 4.8285 8.89146 4.6285 8.85696 4.4285H5.07996Z" fill="#4285F4"/>
                                    </g>
                                    <defs>
                                        <filter id="filter0_d20" x="0.5" y="0.5" width="10" height="10" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
                                            <feFlood flood-opacity="0" result="BackgroundImageFix"/>
                                            <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"/>
                                            <feOffset dx="0.5" dy="0.5"/>
                                            <feGaussianBlur stdDeviation="0.5"/>
                                            <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.4 0"/>
                                            <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow"/>
                                            <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow" result="shape"/>
                                        </filter>
                                    </defs>
                                </svg>
                        </button>
                    `;
                },
                copyModeHTML(type) {
                    return type === 'copy' ? `<div class="btn active-duo" data-type="copy">Copy</div>Google` : `Copy<div class="btn active-duo" data-type="google">Google</div>`
                },
                createTextHTML({text, top, left, width, height}) {
                    var inst = this;
                    return `<div class="text notformated" style="position: absolute;top:${top}px; left:${left}px;line-height:0.9; width:${width}px; height:${height}px;backdrop-filter: blur(3px);">
                        <p style="font-size:${height}px; white-space: nowrap; display: inline-block;">${text}</p>
                        ${inst.defineTypeButton(inst.copyMode, height)}
                    </div>`;
                },
            }

            var utils = {
                getOriginalSize(base64) {
                    return new Promise(function(resolve) {
                        var img = new Image();

                        img.onload = function(readerEvent) {
                            var origSize =  {
                                width: img.naturalWidth,
                                height: img.naturalHeight,
                            }

                            this.naturalSize = origSize;

                            resolve(origSize);
                        }

                        img.src = base64;
                    })
                },
                setInfToStorage() {
                    try {
                        localStorage.setItem('imgInf', JSON.stringify({
                            base64: this.base64,
                            texts: this.texts,
                            mode: this.copyMode,
                        }));
                    } catch (e) {
                        console.log(e);
                    }
                    return this;
                },
                getInfFromStorage() {
                    try {
                        var base64 = JSON.parse(localStorage.getItem('imgInf'));
                    } catch (e) {
                        console.log(e);
                    }
                    return base64;
                },
                calcScale(size) {
                    var containerWidth = this.calcContainerWidth();

                    var scale = size.width / containerWidth;
                    this.scale = scale;

                    return scale;
                },
                calcContainerWidth() {
                    this.containerWidth = window.parseInt(window.getComputedStyle(container)['max-width']);
                    return this.containerWidth;
                },
                calcTextSizeParams() {
                    var maxH = 0;
                    var minH = Infinity;
                    var sum = 0;
                    
                    this.texts.forEach(function(text) {
                        if(text.height > maxH) maxH = text.height;
                        if(text.height < minH) minH = text.height;
                        sum += text.height;
                    });

                    sum -= maxH + minH;
                    var averageH = sum / this.texts.length - 2;

                    var popularH = this.texts.sort((a,b) =>
                        this.texts.filter(v => v.height=== a.height).length
                        - this.texts.filter(v => v.height === b.height).length
                    )

                    popularH = popularH[popularH.length - 1].height;

                    var maxRate = maxH / popularH;
                    var minRate = popularH / minH;
                    
                    return  { 
                        maxH, 
                        averageH,
                        popularH,
                        maxRate,
                        minRate,
                        minH,
                    }
                },
                getImgScale(base64) {
                    var inst = this;

                    if(this.naturalSize) return Promise.resolve(this.calcScale(this.naturalSize));

                    return this.getOriginalSize(base64)
                        .then(function(sizeOrig) {
                            return inst.calcScale(sizeOrig);
                        });
                },
                adjustFontSize(parentBlock, childBlock) {
                    document.querySelectorAll(parentBlock).forEach(function(parent) {
                        var needWidth = parent.clientWidth
                        var parentH = parent.clientHeight;
                        var child = parent.querySelector(childBlock)
                        var currentWidth = child.clientWidth;
                        var fs = child.style.fontSize.replace('px','');
                        var rate = needWidth / currentWidth;
                        var newFs = fs * rate;
                        var fsBigH = (newFs * 100 / parentH) - 100;
                        child.style.fontSize = fsBigH > 50 ? parentH + 'px' : newFs + 'px';
                    });
                },
                chechIsAnomalyRate(type, textHeight, textParams) {
                    return Boolean(textParams[`${type}Rate`] >= this.anomalyRate && textParams[`${type}H`] === textHeight)
                },
                clearState(includeProp = ['root']) {
                    var inst = this;
                    
                    Object.keys(inst).forEach(function(key) {
                        if(typeof inst[key] !== 'function' && !includeProp.includes(key)) {
                            inst[key] = null;
                        }
                    });

                    return this;
                },
                logger(data, id) {
                    console.log(id, typeof data === 'object' ? JSON.stringify(data) : data);
                },
                hideMessageWithInterval(t = 2000) {
                    var inst = this;
                    setTimeout(function() {
                        inst.hideMessage();
                    }, t);
                    return this;
                },
            };

            var app = {
                root: rootApp,
                imgData: null,
                texts: null,
                base64: null,
                scale: null,
                naturalSize: null,
                containerWidth: null,
                isLoading: false,
                anomalyRate: 10,
                copyMode: 'copy',
                ...hideAndShowElm,
                ...layouts,
                ...utils,
                ...html,
                setTexts(texts) {
                    this.texts = texts;

                    return this;
                },
                setBase64(base64) {
                    this.base64 = base64;

                    return this;
                },
                setImgSrc() {
                    this.imgData = this.base64.split(',')[1];
                    
                    var inst = this;

                    img.onload = function() {
                        inst.showImageLayout();
                    }

                    img.src = this.base64;

                    return this;
                },
                getTexts() {
                    return imgTexts.textContent.trim();
                },
                toogleCopyMode(type) {
                    this.copyMode = type;

                    this.setInfToStorage();

                    duoButton.innerHTML = this.copyModeHTML(type);

                    this.replaceTextButton(type);

                    return this;
                },
                defineTypeButton(type, height) {
                    return type === 'copy' ? this.createCopyLineButtonHTML(height) : this.createGoogleSearchHTML(height);
                },
                replaceTextButton(type = 'copy') {
                    var inst = this;
                    imgTexts.querySelectorAll('.text.notformated').forEach(function(line) {
                        var button = line.querySelector('.btn.text-btn');
                        var height = parseInt(button.style.height, 10);
                        button.remove();

                        var newBtn = inst.defineTypeButton(type, height);

                        line.insertAdjacentHTML('beforeend', newBtn);
                    })
                    return this;
                },
                createInputElement() {
                    var input = document.createElement('input');
                    input.type = 'file';
                    input.classList.add('input-upload');
                    return input;
                },
                removeInputElement() {
                    var inputExist = container.querySelector('.input-upload');

                    if(inputExist) inputExist.remove();

                    return this;
                },
                setScaleContainer() {
                    this.getImgScale(this.base64)
                        .then(function(scale) {
                            if(scale < 1) return;
                            imgTexts.style.transform = `scale(${(1 / scale).toFixed(6)})`
                        });

                    return this;
                },
                insertText() {
                    if(!this.texts.length) return this;

                    if(this.texts.length === 1 && !this.texts[0].text.trim()) return this;
                    
                    var inst = this;
                    this.setInfToStorage();

                    var textParams = this.calcTextSizeParams();

                    this.hideTextOnImg();

                    this.texts.forEach(function(text) {
                        if(inst.chechIsAnomalyRate('max', text.height, textParams)) text.height = textParams.popularH;
                        if(inst.chechIsAnomalyRate('min', text.height, textParams)) text.height = textParams.popularH;
        
                        var html = inst.createTextHTML(text);
                        imgTexts.insertAdjacentHTML('beforeend', html);
                    });

                    setTimeout(function() {
                        inst.showTextOnImg();
                        inst.adjustFontSize('.text.notformated', 'p');
                    }, 0);

                    return this;
                },
                reset() {
                    imgTexts.innerHTML = '';
                    img.src = '';
                    imgTexts.style.transform = '';

                    this.restoreInitLayout();
                },
            };

            window.onResetClick = function() {
                app.reset();
            };

            window.onCopyLink = function() {
                navigator.clipboard.writeText(document.URL);
                app.showMessage('Link copied to clipboard').hideMessageWithInterval();
            };

            window.onUploadClick = function() {
                var input = app.removeInputElement().createInputElement();

                input.click();

                input.addEventListener('change', function(e) {
                    var { files } = input;

                    var file = Array.from(files)[0];
                    
                    convertOnBase64AndSubmit(file);
                }, {once: true});

                container.append(input);
            }

            window.onCopyLineClick = function(e) {
                var text = e.previousElementSibling.textContent.trim();
                navigator.clipboard.writeText(text);
                app.showMessage('Copy text from image<br/>Copied to clipboard').hideMessageWithInterval();
            }

            window.onGoogleSearch = function(e) {
                var text = e.previousElementSibling.textContent.trim();
                var newW = window.open('https://www.google.com/search?q='+text);
            }

            window.onToogleMode = function(e) {
                var btn = duoButton.querySelector('div');
                var curType = btn.dataset.type;

                var newType = curType === 'copy' ? 'google' : 'copy';

                app.toogleCopyMode(newType);
            }

            window.app = app;

            window.copyText = function() {
                navigator.clipboard.writeText(app.getTexts());
            };

            var imgStorage = app.getInfFromStorage();

            if(imgStorage && imgStorage.base64 && imgStorage.texts) {
                app.copyMode = 'mode' in imgStorage && imgStorage.mode;
                app.startUploadLayout(imgStorage.base64, app.copyMode)
                    .endUploadLayout(imgStorage.texts);          
            } else {
                app.showInitLayout();
            }

            window.addEventListener('dragenter', function(e) {
                e.preventDefault();

                app.showDragging();
            }, false);

            window.addEventListener('dragleave', function(e) {
                e.preventDefault();
                if (e.fromElement === null) {
                    app.hideDragging();
                }
            }, false);

            window.addEventListener("dragover",function(e) {
                e.preventDefault();
            }, false);

            window.addEventListener("drop", function(e) {
                e.preventDefault();
                e.stopPropagation();
                
                app.hideDragging();

                var files = Array.from(e.dataTransfer.files);
              
                convertOnBase64AndSubmit(files[0]);
            }, false);

            function sendImageToServer(base64) {
                app.startUploadLayout(base64);
                try {
                    callREST({base64: app.imgData})
                        .then(function(resp) {
                            app.endUploadLayout(resp.texts);
                        })
                        .catch(() => {
                            app.hideLoader();
                        })
                } catch (e) {
                    app.hideLoader();
                }
            }

            function convertOnBase64AndSubmit(file) {
                var reader = new FileReader();

                reader.onload = (ev) => {
                    sendImageToServer(ev.target.result);
                }

                reader.readAsDataURL(file);
            }

            document.onpaste = function(e) {
                app.reset();
                var { items } = event.clipboardData || event.originalEvent.clipboardData;
                
                Array.from(items).forEach(function(item) {
                    if (item.kind === 'file') {
                        var blob = item.getAsFile();

                        convertOnBase64AndSubmit(blob);
                    }
                });
            }

            window.onresize = function(e) {
                app.setScaleContainer();
            }
        })
    </script>
{% endblock %} 
